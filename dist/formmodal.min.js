(()=>{var i=(d,t)=>{let o=document.createElement(d);return t&&(o.className=t),o},m=class{constructor(t){this.options=t||{},this.modal=null,this.modalContent=null,this.closeBtn=null,this.form=null,this.confirmationMessage=null,this.isSubmitting=!1}injectCSS(){if(document.querySelector(".formModalCss"))return;let t=i("style","formModalCss");t.innerHTML="\n      .custom-modal {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 1000;\n        justify-content: center;\n        align-items: center;\n        transition: opacity 0.3s ease;\n      }\n      .custom-modal *{\n        box-sizing: border-box;\n      }\n      .custom-modal-content {\n        background-color: white;\n        padding: 20px;\n        border-radius: 8px;\n        max-width: 400px;\n        width: 80%;\n        text-align: center;\n        position: relative;\n      }\n\n      .custom-modal h2 {\n        margin-bottom: 20px;\n        font-size: 1.5rem;\n      }\n\n      .custom-modal .form-group {\n        margin-bottom: 15px;\n        text-align: left;\n      }\n\n      .custom-modal .form-group label {\n        display: block;\n        margin-bottom: 5px;\n        font-weight: bold;\n      }\n\n      .custom-modal .form-control {\n        width: 100%;\n        padding: 10px;\n        border-radius: 4px;\n        border: 1px solid #ccc;\n      }\n\n      .custom-modal .submit-btn {\n        background-color: #007BFF;\n        color: white;\n        padding: 10px 20px;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.3s;\n        width: 100%;\n      }\n\n      .custom-modal .submit-btn:hover {\n        background-color: #0056b3;\n      }\n\n      .custom-modal .close {\n        font-size: 20px;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        cursor: pointer;\n        padding: 0;\n        border-radius: 50%;\n        height: 30px;\n        width: 30px;\n        line-height: 1;\n        border: none;\n      }\n\n      .custom-modal .confirmation-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #28a745;\n        color: white;\n        border-radius: 8px;\n        display: flex;\n        align-items: center;\n      }\n\n      .custom-modal .confirmation-message svg {\n        width: 24px;\n        height: 24px;\n        margin-right: 10px;\n      }\n\n      .custom-modal .error-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #dc3545;\n        color: white;\n        border-radius: 8px;\n      }\n\n      .honeypot {\n        position: absolute;\n        width: 0;\n        height: 0;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        visibility: hidden;\n      }\n    ",document.head.appendChild(t)}open(){this.modal&&(this.modal.style.display="flex",this.modal.style.opacity="1",this.modal.setAttribute("aria-hidden","false"),this.modalContent.setAttribute("tabindex","-1"),this.modalContent.focus())}close(){this.modal.style.opacity="0",this.timeout=setTimeout(this.cleanupForm.bind(this),300),this.triggerElement&&this.triggerElement.focus()}cleanupForm(){this.timeout&&clearTimeout(this.timeout),this.modal&&(this.modal.remove(),this.modal=null)}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validatePhone(t){return/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(t)}handleSubmit(t){if(t.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0;let o=this.form.querySelector(".honeypot");if(o&&o.value){this.showError("Please do not use autofill!"),this.isSubmitting=!1;return}let r=!0,s=new FormData(this.form),n={};s.forEach((e,a)=>{n[a]=e}),n.email&&!this.validateEmail(n.email)&&(r=!1,this.showError("Please enter a valid email address.")),n.phone&&!this.validatePhone(n.phone)&&(r=!1,this.showError("Please enter a valid phone number."));for(let e in n)if(this.options.fields.find(a=>a.name===e&&a.required)&&!n[e]){r=!1,this.showError("".concat(e.charAt(0).toUpperCase()+e.slice(1)," is required."));break}if(!r){this.isSubmitting=!1;return}let l=this.options.actionUrl;l?fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{e?this.showConfirmation(e.message||"Thank you for submitting the form!"):this.showError("There was an error submitting your form. Please try again.")}).catch(e=>{this.showError("An error occurred while submitting the form. Please try again.")}).finally(()=>{this.isSubmitting=!1}):(this.showError("No action URL specified."),this.isSubmitting=!1)}showConfirmation(t){this.confirmationMessage&&this.confirmationMessage.remove(),this.form.style.display="none";let o=i("div","confirmation-message"),r='\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M20 6L9 17l-5-5"></path>\n      </svg>\n    ';o.innerHTML="".concat(r," ").concat(t),this.modalContent.appendChild(o),setTimeout(this.close.bind(this),1e4)}showError(t){this.confirmationMessage&&this.confirmationMessage.remove();let o=i("div","error-message");o.textContent=t,this.modalContent.appendChild(o),this.confirmationMessage=o}create(){this.modal=i("div","custom-modal"),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-labelledby","modal-title"),this.modal.setAttribute("aria-hidden","true"),this.modalContent=i("div","custom-modal-content"),this.closeBtn=i("button","close"),this.closeBtn.setAttribute("aria-label","Close Modal"),this.closeBtn.innerHTML="&times;",this.modalContent.appendChild(this.closeBtn);let t=i("h2");t.id="modal-title",t.textContent=this.options.title||"Sign Up",this.modalContent.appendChild(t),this.form=i("form"),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.options.fields.forEach(s=>{let n=i("div","form-group"),l=i("label");l.setAttribute("for",s.name),l.textContent=s.label,n.appendChild(l);let e;s.type==="select"?(e=i("select","form-control"),s.options.forEach(a=>{let h=i("option");h.innerText=a,e.appendChild(h)})):(e=i("input","form-control"),e.setAttribute("type",s.type||"text"),e.setAttribute("placeholder",s.placeholder||"")),e.setAttribute("name",s.name),e.required=s.required||!1,n.appendChild(e),this.form.appendChild(n)});let o=i("input","honeypot");o.setAttribute("type","text"),o.setAttribute("name","honeypot"),this.form.appendChild(o);let r=i("button","submit-btn");r.type="submit",r.textContent=this.options.submitButtonText||"Submit",this.form.appendChild(r),this.modalContent.appendChild(this.form),this.modal.appendChild(this.modalContent),document.body.appendChild(this.modal),this.closeBtn.addEventListener("click",this.close.bind(this)),this.modal.addEventListener("click",s=>{s.target===this.modal&&this.close()}),this.injectCSS()}};function c(){document.querySelectorAll("[data-form-modal]").forEach(t=>{t.addEventListener("click",function(o){o.preventDefault(),this.triggerElement=t;let r=t.getAttribute("data-title"),s=t.getAttribute("data-submit-button-text"),n=t.getAttribute("data-form-modal"),l=t.getAttribute("data-action-url"),e=JSON.parse(n),a=new m({title:r,submitButtonText:s,fields:e,actionUrl:l});a.create(),a.open()})})}document.addEventListener("DOMContentLoaded",c);})();
//# sourceMappingURL=formmodal.min.js.map
