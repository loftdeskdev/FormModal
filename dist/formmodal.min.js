(()=>{var s=(d,t)=>{let e=document.createElement(d);return t&&(e.className=t),e},m=class{constructor(t){this.options=t||{},this.modal=null,this.modalContent=null,this.closeBtn=null,this.form=null,this.confirmationMessage=null,this.isSubmitting=!1}injectCSS(){if(document.querySelector(".formModalCss"))return;let t=s("style","formModalCss");t.innerHTML="\n      .custom-modal {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 1000;\n        justify-content: center;\n        align-items: center;\n        transition: opacity 0.3s ease;\n      }\n      .custom-modal *{\n        box-sizing: border-box;\n      }\n      .custom-modal-content {\n        background-color: white;\n        padding: 20px;\n        border-radius: 8px;\n        max-width: 400px;\n        width: 80%;\n        text-align: center;\n        position: relative;\n      }\n\n      .custom-modal h2 {\n        margin-bottom: 20px;\n        font-size: 1.5rem;\n      }\n\n      .custom-modal .form-group {\n        margin-bottom: 15px;\n        text-align: left;\n      }\n\n      .custom-modal .form-group label {\n        display: block;\n        margin-bottom: 5px;\n        font-weight: bold;\n      }\n\n      .custom-modal .form-group input {\n        width: 100%;\n        padding: 10px;\n        border-radius: 4px;\n        border: 1px solid #ccc;\n      }\n\n      .custom-modal .submit-btn {\n        background-color: #007BFF;\n        color: white;\n        padding: 10px 20px;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.3s;\n        width: 100%;\n      }\n\n      .custom-modal .submit-btn:hover {\n        background-color: #0056b3;\n      }\n\n      .custom-modal .close {\n        font-size: 20px;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        cursor: pointer;\n        padding: 0;\n        border-radius: 50%;\n        height: 30px;\n        width: 30px;\n        line-height: 1;\n        border: none;\n      }\n\n      .custom-modal .confirmation-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #28a745;\n        color: white;\n        border-radius: 8px;\n        font-size: 1.2rem;\n        display: flex;\n        align-items: center;\n      }\n\n      .custom-modal .confirmation-message svg {\n        width: 24px;\n        height: 24px;\n        margin-right: 10px;\n      }\n\n      .custom-modal .error-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #dc3545;\n        color: white;\n        border-radius: 8px;\n        font-size: 1.2rem;\n      }\n\n      .honeypot {\n        position: absolute;\n        width: 0;\n        height: 0;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        visibility: hidden;\n      }\n    ",document.head.appendChild(t)}open(){this.modal.style.display="flex",this.modal.style.opacity="1",this.modal.setAttribute("aria-hidden","false"),this.modalContent.setAttribute("tabindex","-1"),this.modalContent.focus()}close(){this.modal.style.opacity="0",setTimeout(()=>{this.modal.style.display="none",this.modal.setAttribute("aria-hidden","true"),this.cleanupForm()},300),this.triggerElement&&this.triggerElement.focus()}cleanupForm(){this.modal&&(this.modal.remove(),this.modal=null)}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validatePhone(t){return/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(t)}handleSubmit(t){if(t.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0;let e=this.form.querySelector(".honeypot");if(e&&e.value){this.showError("Please do not use autofill!"),this.isSubmitting=!1;return}let n=!0,r=new FormData(this.form),i={};r.forEach((o,l)=>{i[l]=o}),i.email&&!this.validateEmail(i.email)&&(n=!1,this.showError("Please enter a valid email address.")),i.phone&&!this.validatePhone(i.phone)&&(n=!1,this.showError("Please enter a valid phone number."));for(let o in i)if(this.options.fields.find(l=>l.name===o&&l.required)&&!i[o]){n=!1,this.showError("".concat(o.charAt(0).toUpperCase()+o.slice(1)," is required."));break}if(!n){this.isSubmitting=!1;return}let a=this.options.actionUrl;a?fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>o.json()).then(o=>{o?this.showConfirmation(o.message||"Thank you for submitting the form!"):this.showError("There was an error submitting your form. Please try again.")}).catch(o=>{this.showError("An error occurred while submitting the form. Please try again.")}).finally(()=>{this.isSubmitting=!1}):(this.showError("No action URL specified."),this.isSubmitting=!1)}showConfirmation(t){this.confirmationMessage&&this.confirmationMessage.remove(),this.form.style.display="none";let e=s("div","confirmation-message"),n='\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M20 6L9 17l-5-5"></path>\n      </svg>\n    ';e.innerHTML="".concat(n," ").concat(t),this.modalContent.appendChild(e),setTimeout(()=>{this.close()},1e4)}showError(t){this.confirmationMessage&&this.confirmationMessage.remove();let e=s("div","error-message");e.textContent=t,this.modalContent.appendChild(e),this.confirmationMessage=e}create(){this.modal=s("div","custom-modal"),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-labelledby","modal-title"),this.modal.setAttribute("aria-hidden","true"),this.modalContent=s("div","custom-modal-content"),this.closeBtn=s("button","close"),this.closeBtn.setAttribute("aria-label","Close Modal"),this.closeBtn.innerHTML="&times;",this.modalContent.appendChild(this.closeBtn);let t=s("h2");t.id="modal-title",t.textContent=this.options.title||"Sign Up",this.modalContent.appendChild(t),this.form=s("form"),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.options.fields.forEach(r=>{let i=s("div","form-group"),a=s("label");a.setAttribute("for",r.name),a.textContent=r.label,i.appendChild(a);let o=s("input");o.setAttribute("type",r.type||"text"),o.setAttribute("name",r.name),o.setAttribute("placeholder",r.placeholder||""),o.required=r.required||!1,i.appendChild(o),this.form.appendChild(i)});let e=s("input","honeypot");e.setAttribute("type","text"),e.setAttribute("name","honeypot"),this.form.appendChild(e);let n=s("button","submit-btn");n.type="submit",n.textContent=this.options.submitButtonText||"Submit",this.form.appendChild(n),this.modalContent.appendChild(this.form),this.modal.appendChild(this.modalContent),document.body.appendChild(this.modal),this.closeBtn.addEventListener("click",this.close.bind(this)),this.modal.addEventListener("click",r=>{r.target===this.modal&&this.close()}),this.injectCSS()}};function h(){document.querySelectorAll("[data-form-modal]").forEach(t=>{t.addEventListener("click",function(e){e.preventDefault(),this.triggerElement=t;let n=t.getAttribute("data-title"),r=t.getAttribute("data-submit-button-text"),i=t.getAttribute("data-form-modal"),a=t.getAttribute("data-action-url"),o=JSON.parse(i),l=new m({title:n,submitButtonText:r,fields:o,actionUrl:a});l.create(),l.open()})})}document.addEventListener("DOMContentLoaded",h);})();
//# sourceMappingURL=formmodal.min.js.map
