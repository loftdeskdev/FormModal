(()=>{var n=d=>document.createElement(d),h=class{constructor(t){this.options=t||{},this.modal=null,this.modalContent=null,this.closeBtn=null,this.form=null,this.confirmationMessage=null,this.isSubmitting=!1}injectCSS(){let t=n("style");t.innerHTML="\n      .custom-modal {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 1000;\n        justify-content: center;\n        align-items: center;\n        transition: opacity 0.3s ease;\n      }\n      .custom-modal *{\n        box-sizing: border-box;\n      }\n      .custom-modal-content {\n        background-color: white;\n        padding: 20px;\n        border-radius: 8px;\n        max-width: 400px;\n        width: 80%;\n        text-align: center;\n        position: relative;\n      }\n\n      .custom-modal h2 {\n        margin-bottom: 20px;\n        font-size: 1.5rem;\n      }\n\n      .custom-modal .form-group {\n        margin-bottom: 15px;\n        text-align: left;\n      }\n\n      .custom-modal .form-group label {\n        display: block;\n        margin-bottom: 5px;\n        font-weight: bold;\n      }\n\n      .custom-modal .form-group input {\n        width: 100%;\n        padding: 10px;\n        border-radius: 4px;\n        border: 1px solid #ccc;\n      }\n\n      .custom-modal .submit-btn {\n        background-color: #007BFF;\n        color: white;\n        padding: 10px 20px;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.3s;\n      }\n\n      .custom-modal .submit-btn:hover {\n        background-color: #0056b3;\n      }\n\n      .custom-modal .close {\n        font-size: 20px;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        cursor: pointer;\n        padding: 0;\n        border-radius: 50%;\n        height: 30px;\n        width: 30px;\n        line-height: 1;\n        border: none;\n      }\n\n      .custom-modal .confirmation-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #28a745;\n        color: white;\n        border-radius: 8px;\n        font-size: 1.2rem;\n        display: flex;\n        align-items: center;\n      }\n\n      .custom-modal .confirmation-message svg {\n        width: 24px;\n        height: 24px;\n        margin-right: 10px;\n      }\n\n      .custom-modal .error-message {\n        margin-top: 20px;\n        padding: 20px;\n        background-color: #dc3545;\n        color: white;\n        border-radius: 8px;\n        font-size: 1.2rem;\n      }\n\n      /* Honeypot (Invisible Field) */\n      .honeypot {\n        position: absolute;\n        width: 0;\n        height: 0;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        visibility: hidden;\n      }\n    ",document.head.appendChild(t)}open(){this.modal.style.display="flex",this.modal.style.opacity="1",this.modal.setAttribute("aria-hidden","false"),this.modalContent.setAttribute("tabindex","-1"),this.modalContent.focus()}close(){this.modal.style.opacity="0",setTimeout(()=>{this.modal.style.display="none",this.modal.setAttribute("aria-hidden","true"),this.cleanupForm()},300),this.triggerElement&&this.triggerElement.focus()}cleanupForm(){this.modal&&(this.modal.remove(),this.modal=null)}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validatePhone(t){return/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(t)}handleSubmit(t){if(t.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0;let i=this.form.querySelector(".honeypot");if(i&&i.value){this.showError("Please do not use autofill!"),this.isSubmitting=!1;return}let s=!0,a=new FormData(this.form),o={};a.forEach((e,l)=>{o[l]=e}),o.email&&!this.validateEmail(o.email)&&(s=!1,this.showError("Please enter a valid email address.")),o.phone&&!this.validatePhone(o.phone)&&(s=!1,this.showError("Please enter a valid phone number."));for(let e in o)if(this.options.fields.find(l=>l.name===e&&l.required)&&!o[e]){s=!1,this.showError("".concat(e.charAt(0).toUpperCase()+e.slice(1)," is required."));break}if(!s){this.isSubmitting=!1;return}let r=this.options.actionUrl;r?fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{e?this.showConfirmation(e.success||"Thank you for submitting the form!"):this.showError("There was an error submitting your form. Please try again.")}).catch(e=>{this.showError("An error occurred while submitting the form. Please try again.")}).finally(()=>{this.isSubmitting=!1}):(this.showError("No action URL specified."),this.isSubmitting=!1)}showConfirmation(t){this.confirmationMessage&&this.confirmationMessage.remove(),this.form.style.display="none";let i=n("div");i.classList.add("confirmation-message");let s='\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M20 6L9 17l-5-5"></path>\n      </svg>\n    ';i.innerHTML="".concat(s," ").concat(t),this.modalContent.appendChild(i),setTimeout(()=>{this.close()},1e4)}showError(t){this.confirmationMessage&&this.confirmationMessage.remove();let i=n("div");i.classList.add("error-message"),i.textContent=t,this.modalContent.appendChild(i),this.confirmationMessage=i}create(){this.modal=n("div"),this.modal.classList.add("custom-modal"),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-labelledby","modal-title"),this.modal.setAttribute("aria-hidden","true"),this.modalContent=n("div"),this.modalContent.classList.add("custom-modal-content"),this.closeBtn=n("button"),this.closeBtn.classList.add("close"),this.closeBtn.setAttribute("aria-label","Close Modal"),this.closeBtn.innerHTML="&times;",this.modalContent.appendChild(this.closeBtn);let t=n("h2");t.id="modal-title",t.textContent=this.options.title||"Sign Up",this.modalContent.appendChild(t),this.form=n("form"),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.options.fields.forEach(a=>{let o=n("div");o.classList.add("form-group");let r=n("label");r.setAttribute("for",a.name),r.textContent=a.label,o.appendChild(r);let e=n("input");e.setAttribute("type",a.type||"text"),e.setAttribute("name",a.name),e.setAttribute("placeholder",a.placeholder||""),e.required=a.required||!1,o.appendChild(e),this.form.appendChild(o)});let i=n("input");i.setAttribute("type","text"),i.setAttribute("name","ucaptcha"),i.classList.add("honeypot"),this.form.appendChild(i);let s=n("button");s.type="submit",s.className="submit-btn",s.textContent=this.options.submitButtonText||"Submit",this.form.appendChild(s),this.modalContent.appendChild(this.form),this.modal.appendChild(this.modalContent),document.body.appendChild(this.modal),this.closeBtn.addEventListener("click",this.close.bind(this)),this.modal.addEventListener("click",a=>{a.target===this.modal&&this.close()}),this.injectCSS()}};function m(){document.querySelectorAll(".openModalBtn").forEach(t=>{t.addEventListener("click",function(){this.triggerElement=t;let i=t.getAttribute("data-title"),s=t.getAttribute("data-submit-button-text"),a=t.getAttribute("data-fields"),o=t.getAttribute("data-action-url"),r=JSON.parse(a),e=new h({title:i,submitButtonText:s,fields:r,actionUrl:o});e.create(),e.open()})})}document.addEventListener("DOMContentLoaded",m);})();
//# sourceMappingURL=formmodal.min.js.map
